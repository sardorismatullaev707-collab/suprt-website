# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —á–∞—Ç-–≤–∏–¥–∂–µ—Ç–∞

## –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –°–æ–∑–¥–∞–Ω ChatWidget –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (`src/components/ChatWidget.jsx`)
- –ü–ª–∞–≤–∞—é—â–∞—è –∫–Ω–æ–ø–∫–∞ —á–∞—Ç–∞ –≤ –ø—Ä–∞–≤–æ–º –Ω–∏–∂–Ω–µ–º —É–≥–ª—É
- –û–∫–Ω–æ —á–∞—Ç–∞ —Å –∏—Å—Ç–æ—Ä–∏–µ–π —Å–æ–æ–±—â–µ–Ω–∏–π
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–∞—à–∏–º AI –±—ç–∫–µ–Ω–¥–æ–º —á–µ—Ä–µ–∑ `/api/chat`
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä—É—Å—Å–∫–æ–≥–æ –∏ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —è–∑—ã–∫–æ–≤
- –ê–Ω–∏–º–∞—Ü–∏–∏ –∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä "–ø–µ—á–∞—Ç–∞–µ—Ç..."
- –¢–µ–º–Ω–∞—è —Ç–µ–º–∞

### 2. –î–æ–±–∞–≤–ª–µ–Ω—ã —Å—Ç–∏–ª–∏ (`src/styles.css`)
- –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö
- –ì—Ä–∞–¥–∏–µ–Ω—Ç—ã –∏ –∞–Ω–∏–º–∞—Ü–∏–∏
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–µ–º–Ω–æ–π —Ç–µ–º—ã

### 3. –ù–∞—Å—Ç—Ä–æ–µ–Ω Vite –ø—Ä–æ–∫—Å–∏ (`vite.config.js`)
- –ü—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ `/api/*` ‚Üí `http://localhost:3002/*`
- –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å CORS –ø—Ä–æ–±–ª–µ–º –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

### 4. –°–æ–∑–¥–∞–Ω endpoint –¥–ª—è –±—ç–∫–µ–Ω–¥–∞ (`backend-chat-endpoint.js`)
- Express —Ä–æ—É—Ç `/chat` –¥–ª—è –ø—Ä–∏–µ–º–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–∞—à–µ–π —Ñ—É–Ω–∫—Ü–∏–µ–π `askAI()`
- CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è Vite

## –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å

### –®–∞–≥ 1: –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–π—Ç–µ endpoint –≤ –≤–∞—à –±—ç–∫–µ–Ω–¥

–í –≤–∞—à–µ–º –æ—Å–Ω–æ–≤–Ω–æ–º —Ñ–∞–π–ª–µ –±—ç–∫–µ–Ω–¥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä `server.js` –∏–ª–∏ `app.js`) –¥–æ–±–∞–≤—å—Ç–µ:

\`\`\`javascript
import express from 'express';
import cors from 'cors';
import { askAI } from './ai.js';
import { getKnowledgeBase, findBestMatch } from './knowledge.js';

const app = express();

app.use(cors({
  origin: ['http://localhost:5173', 'http://localhost:5174'],
  credentials: true
}));

app.use(express.json());

// Endpoint –¥–ª—è —á–∞—Ç–∞ (–∏–∑ backend-chat-endpoint.js)
app.post('/chat', async (req, res) => {
  try {
    const { message, chatHistory = [] } = req.body;

    if (!message) {
      return res.status(400).json({ 
        error: 'Message required',
        reply: '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ' 
      });
    }

    const knowledgeBase = await getKnowledgeBase();
    const bestMatch = findBestMatch(message, knowledgeBase);
    
    const formattedHistory = chatHistory.map(msg => ({
      role: msg.role,
      content: msg.content
    }));

    const reply = await askAI(message, knowledgeBase, bestMatch, formattedHistory);

    res.json({ reply, timestamp: new Date().toISOString() });

  } catch (error) {
    console.error('[Chat] Error:', error);
    const isRussian = /[–∞-—è–ê-–Ø]/.test(req.body.message || '');
    res.status(500).json({ 
      error: error.message,
      reply: isRussian ? '–û—à–∏–±–∫–∞ üòî' : 'Error üòî'
    });
  }
});

const PORT = process.env.PORT || 3002;
app.listen(PORT, () => {
  console.log(\`[‚úì] Server on http://localhost:\${PORT}\`);
});
\`\`\`

### –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

\`\`\`bash
# –í –ø–∞–ø–∫–µ –±—ç–∫–µ–Ω–¥–∞
npm install express cors

# –í –ø–∞–ø–∫–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ (—É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ)
npm install framer-motion
\`\`\`

### –®–∞–≥ 3: –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±—ç–∫–µ–Ω–¥

\`\`\`bash
# –í –ø–∞–ø–∫–µ —Å –±—ç–∫–µ–Ω–¥–æ–º
node server.js
# –ò–ª–∏ –µ—Å–ª–∏ —É –≤–∞—Å TypeScript:
# tsx server.ts
\`\`\`

–î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è:
\`\`\`
[‚úì] DeepSeek AI initialized
[‚úì] Server on http://localhost:3002
\`\`\`

### –®–∞–≥ 4: –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥

\`\`\`bash
cd "/Users/apple/VS projects/Suprt cliets/Suprt webstie"
npm run dev
\`\`\`

Vite —Å—Ç–∞—Ä—Ç—É–µ—Ç –Ω–∞ `http://localhost:5173` –∏–ª–∏ `5174`

## –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –í –ø—Ä–∞–≤–æ–º –Ω–∏–∂–Ω–µ–º —É–≥–ª—É –¥–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –∫–Ω–æ–ø–∫–∞ —á–∞—Ç–∞ üí¨
3. –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –Ω–µ—ë ‚Äî –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –æ–∫–Ω–æ —á–∞—Ç–∞
4. –ù–∞–ø–∏—à–∏—Ç–µ "–ü—Ä–∏–≤–µ—Ç" ‚Äî –±–æ—Ç –¥–æ–ª–∂–µ–Ω –æ—Ç–≤–µ—Ç–∏—Ç—å
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (F12) ‚Äî –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—à–∏–±–æ–∫

### –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

**–û—à–∏–±–∫–∞ CORS:**
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –±—ç–∫–µ–Ω–¥ –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 3002
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤ –±—ç–∫–µ–Ω–¥–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω CORS (—Å–º. –≤—ã—à–µ)

**–û—à–∏–±–∫–∞ 404:**
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤ –±—ç–∫–µ–Ω–¥–µ –µ—Å—Ç—å —Ä–æ—É—Ç `POST /chat`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ Vite –ø—Ä–æ–∫—Å–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω (`vite.config.js`)

**–ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç:**
- –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12 ‚Üí Console)
- –û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª —Å –±—ç–∫–µ–Ω–¥–æ–º ‚Äî —Ç–∞–º –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ª–æ–≥–∏
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ `DEEPSEEK_API_KEY` –≤ `.env` —Ñ–∞–π–ª–µ –±—ç–∫–µ–Ω–¥–∞

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

\`\`\`
Suprt webstie/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ChatWidget.jsx          ‚Üê –ù–æ–≤—ã–π –≤–∏–¥–∂–µ—Ç —á–∞—Ç–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Header.jsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îú‚îÄ‚îÄ styles.css                   ‚Üê –î–æ–±–∞–≤–ª–µ–Ω—ã —Å—Ç–∏–ª–∏ –≤–∏–¥–∂–µ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ App.jsx                      ‚Üê –î–æ–±–∞–≤–ª–µ–Ω <ChatWidget />
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ vite.config.js                   ‚Üê –ù–æ–≤—ã–π —Ñ–∞–π–ª —Å –ø—Ä–æ–∫—Å–∏
‚îú‚îÄ‚îÄ backend-chat-endpoint.js         ‚Üê –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞ –¥–ª—è –±—ç–∫–µ–Ω–¥–∞
‚îî‚îÄ‚îÄ package.json

Backend/ (–≤–∞—à–∞ –ø–∞–ø–∫–∞)
‚îú‚îÄ‚îÄ server.js                        ‚Üê –î–æ–±–∞–≤—å—Ç–µ —Å—é–¥–∞ /chat endpoint
‚îú‚îÄ‚îÄ ai.js                            ‚Üê –í–∞—à–∞ —Ñ—É–Ω–∫—Ü–∏—è askAI
‚îú‚îÄ‚îÄ knowledge.js                     ‚Üê –í–∞—à–∏ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Å Sheets
‚îî‚îÄ‚îÄ .env                             ‚Üê –ö–ª—é—á–∏ API
\`\`\`

## –ß—Ç–æ –¥–∞–ª—å—à–µ?

- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞ (localStorage)
- [ ] –î–æ–±–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É "–æ—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é"
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É —Ñ–∞–π–ª–æ–≤/–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- [ ] –î–æ–±–∞–≤–∏—Ç—å sound –ø—Ä–∏ –Ω–æ–≤–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏

---

**–ö–æ–Ω—Ç–∞–∫—Ç—ã:** @sardor_ismatillaev | ceo@suprt.org
