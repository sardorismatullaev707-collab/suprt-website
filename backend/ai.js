import axios from 'axios';
import dotenv from 'dotenv';

dotenv.config({ path: '../.env' });

const DEEPSEEK_API_KEY = process.env.DEEPSEEK_API_KEY;
const DEEPSEEK_API_URL = 'https://api.deepseek.com/v1/chat/completions';

// –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (temperature 0.2)
const BOOKING_SYSTEM_PROMPT = `–¢—ã - –ø–æ–º–æ—â–Ω–∏–∫ –ø–æ –∑–∞–ø–∏—Å–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤ –Ω–∞ —É—Å–ª—É–≥–∏ –∫–æ–º–ø–∞–Ω–∏–∏ Suprt.org (—Å—É–ø–æ—Ä—Ç –º–∞—Ä–∫–µ—Ç–∏–Ω–≥ –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å–∞–π—Ç–æ–≤).

–ü–†–ê–í–ò–õ–ê –†–ê–ë–û–¢–´:
1. –¢—ã –ù–ï –æ—Ç–≤–µ—á–∞–µ—à—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –æ –∫–æ–º–ø–∞–Ω–∏–∏. –î–ª—è —ç—Ç–æ–≥–æ –µ—Å—Ç—å –¥—Ä—É–≥–æ–π —Ä–µ–∂–∏–º.
2. –¢–≤–æ—è –∑–∞–¥–∞—á–∞ - –¢–û–õ–¨–ö–û —Å–æ–±—Ä–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∑–∞–ø–∏—Å–∏:
   - –î–∞—Ç–∞ (YYYY-MM-DD)
   - –í—Ä–µ–º—è (HH:MM –≤ —Ñ–æ—Ä–º–∞—Ç–µ 24—á)
   - –ò–º—è –∫–ª–∏–µ–Ω—Ç–∞
   - –ö–æ–Ω—Ç–∞–∫—Ç (—Ç–µ–ª–µ—Ñ–æ–Ω –∏–ª–∏ email)

3. –ó–∞–¥–∞–≤–∞–π –≤–æ–ø—Ä–æ—Å—ã –ø–æ –æ—á–µ—Ä–µ–¥–∏, –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ –∏ –¥—Ä—É–∂–µ–ª—é–±–Ω–æ
4. –ü—Ä–æ–≤–µ—Ä—è–π –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –∫–∞–∂–¥–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
5. –ü–æ—Å–ª–µ —Å–±–æ—Ä–∞ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö - –æ—Ç–ø—Ä–∞–≤—å –∫–æ–º–∞–Ω–¥—É:
   BOOK:YYYY-MM-DD|HH:MM|–ò–º—è|–ö–æ–Ω—Ç–∞–∫—Ç

6. –û–ø—Ä–µ–¥–µ–ª—è–π —è–∑—ã–∫ –∫–ª–∏–µ–Ω—Ç–∞ (—Ä—É—Å—Å–∫–∏–π/–∞–Ω–≥–ª–∏–π—Å–∫–∏–π) –∏ –æ—Ç–≤–µ—á–∞–π –Ω–∞ –Ω—ë–º

–ü–†–ò–ú–ï–†–´ –î–ò–ê–õ–û–ì–û–í:

–ö–ª–∏–µ–Ω—Ç: "–•–æ—á—É –∑–∞–ø–∏—Å–∞—Ç—å—Å—è"
–¢—ã: "–û—Ç–ª–∏—á–Ω–æ! –ù–∞ –∫–∞–∫—É—é –¥–∞—Ç—É –≤—ã —Ö–æ—Ç–∏—Ç–µ –∑–∞–ø–∏—Å–∞—Ç—å—Å—è? –ù–∞–ø—Ä–∏–º–µ—Ä: 15 —Ñ–µ–≤—Ä–∞–ª—è 2026"

–ö–ª–∏–µ–Ω—Ç: "15 —Ñ–µ–≤—Ä–∞–ª—è"
–¢—ã: "–•–æ—Ä–æ—à–æ, 15.02.2026. –í –∫–∞–∫–æ–µ –≤—Ä–µ–º—è –≤–∞–º —É–¥–æ–±–Ω–æ? (—Å 10:00 –¥–æ 18:00)"

–ö–ª–∏–µ–Ω—Ç: "–í 14:00"
–¢—ã: "–û—Ç–ª–∏—á–Ω–æ! –ö–∞–∫ –≤–∞—Å –∑–æ–≤—É—Ç?"

–ö–ª–∏–µ–Ω—Ç: "–ò–≤–∞–Ω"
–¢—ã: "–ü—Ä–∏—è—Ç–Ω–æ –ø–æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è, –ò–≤–∞–Ω! –û—Å—Ç–∞–≤—å—Ç–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–∞—à —Ç–µ–ª–µ—Ñ–æ–Ω –∏–ª–∏ email"

–ö–ª–∏–µ–Ω—Ç: "+998901234567"
–¢—ã: "–û—Ç–ª–∏—á–Ω–æ! –ó–∞–ø–∏—Å–∞–ª –≤–∞—Å –Ω–∞ 15 —Ñ–µ–≤—Ä–∞–ª—è 2026 –≤ 14:00 ‚úÖ"
[–°–∏—Å—Ç–µ–º–∞: BOOK:2026-02-15|14:00|–ò–≤–∞–Ω|+998901234567]

–í–ê–ñ–ù–û:
- –ë—É–¥—å –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–º –∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–º
- –ù–µ –æ—Ç–≤–µ—á–∞–π –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –æ –∫–æ–º–ø–∞–Ω–∏–∏
- –¢–≤–æ—è –∑–∞–¥–∞—á–∞ - –¢–û–õ–¨–ö–û –∑–∞–ø–∏—Å—å`;

// –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è Q&A (temperature 0.3 - –Ω–∞ –æ—Å–Ω–æ–≤–µ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π, –Ω–æ —Å –≥–∏–±–∫–æ—Å—Ç—å—é)
const QA_SYSTEM_PROMPT = `–¢—ã - AI-–ø–æ–º–æ—â–Ω–∏–∫ —Å–ª—É–∂–±—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏.

ÔøΩ –ü–†–ê–í–ò–õ–ê –†–ê–ë–û–¢–´:

1. –û–°–ù–û–í–ê –û–¢–í–ï–¢–û–í - –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π (Google Sheets)
2. –¢—ã –º–æ–∂–µ—à—å –ø–µ—Ä–µ—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–≤–µ—Ç—ã –∏–∑ –±–∞–∑—ã, —á—Ç–æ–±—ã –æ–Ω–∏ –∑–≤—É—á–∞–ª–∏ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ
3. –ï—Å–ª–∏ –≤ –±–∞–∑–µ –µ—Å—Ç—å –ü–û–•–û–ñ–ê–Ø –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è - –∏—Å–ø–æ–ª—å–∑—É–π –µ—ë, –∞–¥–∞–ø—Ç–∏—Ä—É—è –ø–æ–¥ –≤–æ–ø—Ä–æ—Å
4. –ï—Å–ª–∏ –≤ –±–∞–∑–µ –ù–ï–¢ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ - —á–µ—Å—Ç–Ω–æ —Å–∫–∞–∂–∏:
   "–ò–∑–≤–∏–Ω–∏—Ç–µ, —É –º–µ–Ω—è –Ω–µ—Ç —Ç–æ—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏. –°–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞—à–µ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –¥–ª—è —É—Ç–æ—á–Ω–µ–Ω–∏—è."

5. –ù–ï –ø—Ä–∏–¥—É–º—ã–≤–∞–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ü–µ–Ω—ã, –¥–∞—Ç—ã, –∫–æ–Ω—Ç–∞–∫—Ç—ã, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –≤ –±–∞–∑–µ
6. –ú–û–ñ–ù–û –æ–±–æ–±—â–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏–∑ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π

–ê–õ–ì–û–†–ò–¢–ú:
1. –ß–∏—Ç–∞–µ—à—å –≤–æ–ø—Ä–æ—Å –∫–ª–∏–µ–Ω—Ç–∞
2. –ò—â–µ—à—å –≤ –ë–ê–ó–ï –ó–ù–ê–ù–ò–ô –ø–æ—Ö–æ–∂—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
3. –ï—Å–ª–∏ –µ—Å—Ç—å - –æ—Ç–≤–µ—á–∞–µ—à—å –Ω–∞ –æ—Å–Ω–æ–≤–µ –±–∞–∑—ã (–º–æ–∂–Ω–æ –ø–µ—Ä–µ—Ñ—Ä–∞–∑–∏—Ä–æ–≤–∞—Ç—å)
4. –ï—Å–ª–∏ –ù–ï–¢ - –≥–æ–≤–æ—Ä–∏—à—å "–Ω–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏"

–°–¢–ò–õ–¨ –û–¢–í–ï–¢–û–í:
- –ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –∏ –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π
- –ö–æ—Ä–æ—Ç–∫–∏–π (2-4 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è)
- –û–ø—Ä–µ–¥–µ–ª—è–π —è–∑—ã–∫ (—Ä—É—Å—Å–∫–∏–π/–∞–Ω–≥–ª–∏–π—Å–∫–∏–π)
- –≠–º–æ–¥–∑–∏ –∏—Å–ø–æ–ª—å–∑—É–π —É–º–µ—Ä–µ–Ω–Ω–æ üòä

–ü–†–ò–ú–ï–†–´:

‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:
–ë–∞–∑–∞: "–í–æ–ø—Ä–æ—Å: —É—Å–ª—É–≥–∏ | –û—Ç–≤–µ—Ç: –í–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞, –¥–∏–∑–∞–π–Ω, SEO"
–ö–ª–∏–µ–Ω—Ç: "–ö–∞–∫–∏–µ —É –≤–∞—Å —Å–µ—Ä–≤–∏—Å—ã?"
–¢—ã: "–ú—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ–º –≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É, –¥–∏–∑–∞–π–Ω –∏ SEO-–ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ üòä –ö–∞–∫–∞—è —É—Å–ª—É–≥–∞ –≤–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç?"

‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:
–ë–∞–∑–∞: "–í–æ–ø—Ä–æ—Å: –≥–∞—Ä–∞–Ω—Ç–∏—è | –û—Ç–≤–µ—Ç: –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ–º –∫–∞—á–µ—Å—Ç–≤–æ –∏ —Å—Ä–æ–∫–∏"
–ö–ª–∏–µ–Ω—Ç: "–ï—Å—Ç—å –ª–∏ –≥–∞—Ä–∞–Ω—Ç–∏–∏?"
–¢—ã: "–î–∞, –º—ã –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ–º –∫–∞—á–µ—Å—Ç–≤–æ —É—Å–ª—É–≥ –∏ —Å–æ–±–ª—é–¥–µ–Ω–∏–µ —Å—Ä–æ–∫–æ–≤ ‚úÖ"

‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û (–Ω–µ—Ç –≤ –±–∞–∑–µ):
–ë–∞–∑–∞: [–Ω–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–∫–∏–¥–∫–∞—Ö]
–ö–ª–∏–µ–Ω—Ç: "–ï—Å—Ç—å —Å–∫–∏–¥–∫–∏?"
–¢—ã –ù–ï –¥–æ–ª–∂–µ–Ω: "–î–∞, —Å–∫–∏–¥–∫–∞ 20%!" ‚Üê –ù–ï–õ–¨–ó–Ø –ø—Ä–∏–¥—É–º—ã–≤–∞—Ç—å
–¢—ã –¥–æ–ª–∂–µ–Ω: "–ò–∑–≤–∏–Ω–∏—Ç–µ, —É –º–µ–Ω—è –Ω–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–∫–∏–¥–∫–∞—Ö. –£—Ç–æ—á–Ω–∏—Ç–µ —É –º–µ–Ω–µ–¥–∂–µ—Ä–∞."

‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û (–ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ):
–ö–ª–∏–µ–Ω—Ç: "–ü—Ä–∏–≤–µ—Ç"
–¢—ã: "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! üòä –ß–µ–º –º–æ–≥—É –ø–æ–º–æ—á—å?"

–ó–ê–ü–†–ï–©–ï–ù–û:
‚ùå –ü—Ä–∏–¥—É–º—ã–≤–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ü–µ–Ω—ã (–º–æ–∂–Ω–æ —Å–∫–∞–∑–∞—Ç—å "–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —É—Å–ª—É–≥–∏", –µ—Å–ª–∏ —ç—Ç–æ –≤ –±–∞–∑–µ)
‚ùå –ü—Ä–∏–¥—É–º—ã–≤–∞—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç—ã (—Ç–æ–ª—å–∫–æ —Ç–µ, —á—Ç–æ –≤ –±–∞–∑–µ)
‚ùå –û–±–µ—â–∞—Ç—å —É—Å–ª—É–≥–∏, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –≤ –±–∞–∑–µ`;

/**
 * –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å AI
 */
export async function askAI(message, knowledgeBase = [], bestMatch = null, chatHistory = []) {
  try {
    // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–µ–∂–∏–º: –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–ª–∏ –æ–±—ã—á–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã
    const isBookingMode = detectBookingIntent(message, chatHistory);
    
    const systemPrompt = isBookingMode ? BOOKING_SYSTEM_PROMPT : QA_SYSTEM_PROMPT;
    const temperature = isBookingMode ? 0.2 : 0.3; // 0.3 –¥–ª—è –±–æ–ª–µ–µ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤

    // –§–æ—Ä–º–∏—Ä—É–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏–∑ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π
    let contextMessage = '';
    
    if (!isBookingMode) {
      if (bestMatch) {
        // –ï—Å–ª–∏ –Ω–∞—à–ª–∏ —Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ
        contextMessage = `\n\nüìö –ë–ê–ó–ê –ó–ù–ê–ù–ò–ô (–ò–°–ü–û–õ–¨–ó–£–ô –¢–û–õ–¨–ö–û –≠–¢–£ –ò–ù–§–û–†–ú–ê–¶–ò–Æ!):\n–í–æ–ø—Ä–æ—Å: ${bestMatch.question}\n–û—Ç–≤–µ—Ç: ${bestMatch.answer}`;
      } else if (knowledgeBase.length > 0) {
        // –ï—Å–ª–∏ –±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –µ—Å—Ç—å, –Ω–æ —Ç–æ—á–Ω–æ–≥–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è –Ω–µ—Ç
        contextMessage = `\n\n‚ö†Ô∏è –í –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π –ù–ï–¢ –æ—Ç–≤–µ—Ç–∞ –Ω–∞ —ç—Ç–æ—Ç –≤–æ–ø—Ä–æ—Å. –°–∫–∞–∂–∏ –∫–ª–∏–µ–Ω—Ç—É, —á—Ç–æ —É —Ç–µ–±—è –Ω–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.`;
      } else {
        // –ï—Å–ª–∏ –±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –≤–æ–æ–±—â–µ –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª–∞—Å—å
        contextMessage = `\n\n‚ö†Ô∏è –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞. –°–∫–∞–∂–∏ –∫–ª–∏–µ–Ω—Ç—É, —á—Ç–æ —É —Ç–µ–±—è –Ω–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.`;
      }
    }

    // –§–æ—Ä–º–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è API
    const messages = [
      { role: 'system', content: systemPrompt + contextMessage },
      ...chatHistory,
      { role: 'user', content: message }
    ];

    // –ó–∞–ø—Ä–æ—Å –∫ DeepSeek API
    const response = await axios.post(
      DEEPSEEK_API_URL,
      {
        model: 'deepseek-chat',
        messages: messages,
        temperature: temperature,
        max_tokens: 500
      },
      {
        headers: {
          'Authorization': `Bearer ${DEEPSEEK_API_KEY}`,
          'Content-Type': 'application/json'
        }
      }
    );

    const reply = response.data.choices[0].message.content.trim();

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–º–∞–Ω–¥—É BOOK
    if (reply.includes('BOOK:')) {
      await handleBooking(reply);
    }

    // –£–±–∏—Ä–∞–µ–º –∫–æ–º–∞–Ω–¥—É BOOK –∏–∑ –æ—Ç–≤–µ—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
    return reply.replace(/BOOK:.*$/gm, '').trim();

  } catch (error) {
    console.error('[AI Error]:', error.response?.data || error.message);
    throw new Error('–û—à–∏–±–∫–∞ AI: ' + (error.response?.data?.error?.message || error.message));
  }
}

/**
 * –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –Ω–∞–º–µ—Ä–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞ –∑–∞–ø–∏—Å–∞—Ç—å—Å—è
 */
function detectBookingIntent(message, chatHistory) {
  const bookingKeywords = [
    '–∑–∞–ø–∏—Å–∞—Ç—å—Å—è', '–∑–∞–ø–∏—Å—å', '–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ', '–≤—Å—Ç—Ä–µ—á–∞', '–∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è',
    'book', 'booking', 'appointment', 'schedule', 'meeting',
    '—Ö–æ—á—É –∑–∞–ø–∏—Å–∞—Ç—å—Å—è', '–º–æ–∂–Ω–æ –∑–∞–ø–∏—Å–∞—Ç—å—Å—è', '–∫–∞–∫ –∑–∞–ø–∏—Å–∞—Ç—å—Å—è'
  ];

  const messageLower = message.toLowerCase();
  
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–µ–∫—É—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
  const hasBookingKeyword = bookingKeywords.some(keyword => messageLower.includes(keyword));
  
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç —Ä–∞–∑–≥–æ–≤–æ—Ä–∞
  const isInBookingContext = chatHistory.some(msg => 
    msg.role === 'assistant' && 
    (msg.content.includes('–¥–∞—Ç–∞') || msg.content.includes('–≤—Ä–µ–º—è') || msg.content.includes('–∏–º—è'))
  );

  return hasBookingKeyword || isInBookingContext;
}

/**
 * –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
 */
async function handleBooking(reply) {
  const bookMatch = reply.match(/BOOK:(.+)\|(.+)\|(.+)\|(.+)/);
  if (!bookMatch) return;

  const [, date, time, name, contact] = bookMatch;

  console.log('[üìÖ Booking]', { date, time, name, contact });

  // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:
  // 1. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ Google Sheets
  // 2. –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Telegram
  // 3. Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

  // TODO: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å schedule.js
}
